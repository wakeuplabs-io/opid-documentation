---
id: smart-contracts
title: Smart Contracts
sidebar_label: Smart Contracts
description: Smart Contracts used by the Optimism ID solution.
keywords:
  - docs
  - opid id
  - smart
  - contract
---

<a href="https://github.com/wakeuplabs-io/opid-contracts" target="_blank">Optimism ID Smart Contracts - Github</a>

## State Contract addresses

For situations where one needs to publish data on the blockchain, such as creating an MTP-type credential, generating on-chain proofs and making credential revocations effective, it is important to have the following Smart Contracts addresses:

|        Network             |     Address                                |
|:--------------------------:|:------------------------------------------:|
| **Optimism Mainnet** | TODO: |
| **Optimism Sepolia** | 0x9a1A258702050BcFB938Ad8Ec0996503473216d1 |

> Check a contract codebase and algorithms of work <ins>[docs](https://docs.iden3.io/contracts/state/)</ins>, <ins>[repository](https://github.com/iden3/contracts/tree/master/contracts/state)</ins>.

## IdentityTreeStore contract (On-chain RHS)

|        Network             |     Address                                |
|:--------------------------:|:------------------------------------------:|
| **Optimism Mainnet** | TODO: |
| **Optimism Sepolia** | 0xa36D2Ed3Dd32B96979D94Ea4cb541059A2029484 |

## UniversalVerifier contract

|         Network          |                  Address                   |
| :----------------------: | :----------------------------------------: |
|   **Optimism Mainnet** | TODO: |
| **Optimism sepolia** | 0x102eB31F9f2797e8A84a79c01FFd9aF7D1d9e556 |

## Validator addresses

Current addresses on **Optimism Sepolia** 

| | Sig | MTP | V3 |
|:-----------------:|:-----------------:|:-----------------:|:-----------------:|
| **Validators** | 0xbA308e870d35A092810a3F0e4d21ece65551dE42 | 0x6e009702a8b16Dca15Fa145E3906B13E75Dc516e | 0xd52131eDC6777d7F7199663dc1629307E13d723A |
| **ERC20Verifier example** | 0xca6bfa62791d3c7c7ed1a5b320018c1C1dAC89Ee (request id = 1) | 0xca6bfa62791d3c7c7ed1a5b320018c1C1dAC89Ee  (request id = 2) | 0xca6bfa62791d3c7c7ed1a5b320018c1C1dAC89Ee  (request id = 3) |
| **ERC20LinkedUniversalVerifier example** | 0x76A9d02221f4142bbb5C07E50643cCbe0Ed6406C (request id = 1) | 0x76A9d02221f4142bbb5C07E50643cCbe0Ed6406C  (request id = 2) | 0x76A9d02221f4142bbb5C07E50643cCbe0Ed6406C  (request id = 3) |
| **ERC20SelectiveDisclosure example** | - | - | 0x9001f41Fbe63fF09635Fe8Dfc532035BA34348B9  (request id = 3) |

## CredentialAtomicQuerySigValidator

<a href="https://github.com/iden3/contracts/blob/master/contracts/validators/CredentialAtomicQuerySigValidator.sol" target="_blank">CredentialAtomicQuerySigValidator.sol - Github</a>

The CredentialAtomicQuerySigValidator contract is used to verify any credential-related zk proof generated by user using the <a href="https://docs.iden3.io/protocol/main-circuits/#credentialAtomicQuerySigV2OnChain" target="_blank">credentialAtomicQuerySigV2OnChain</a> circuit. The contract only verifies proofs based on credential of type `Signature`

The core of the contract is its <a href="https://github.com/iden3/contracts/blob/master/contracts/validators/CredentialAtomicQuerySigValidator.sol#L53" target="_blank">verify</a> function that takes the proof generated by a user and executes a set of verifications:

- Verifies that the proof is valid. This verification is actually performed inside the
  <a href="https://github.com/iden3/contracts/blob/master/contracts/lib/VerifierSig.sol" target="_blank">verifierSig</a> contract which is automatically generated using circom.
- Verifies that the input used to generate the proof matches the query associated to that specific Request.
- Verifies that the user's and the Issuer's identity states are valid based on the State Contract.

> The CredentialAtomicQuerySigValidator executes the same set of verifications of the [Verification Library](/docs/verifier/verification-library/verification-api-guide.md#verification---under-the-hood). The former is required when performing on-chain verification while the latter is required for off-chain verification.

## CredentialAtomicQueryMTPValidator

<a href="https://github.com/iden3/contracts/blob/master/contracts/validators/CredentialAtomicQueryMTPValidator.sol" target="_blank">CredentialAtomicQueryMTPValidator.sol - Github</a>

Performs the same set of verifications of the CredentialAtomicQuerySigValidator but for credential of type `MTP`.

> Further protocol related contracts can be found at <a href="https://docs.iden3.io/contracts/state" target="_blank">Iden3 - Smart Contracts</a>
